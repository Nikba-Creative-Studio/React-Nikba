import{_ as a,o as s,c as n,b as e}from"./app-KJPG7_2i.js";const t={},p=e(`<h1 id="liste-in-react-proprietatea-key" tabindex="-1"><a class="header-anchor" href="#liste-in-react-proprietatea-key"><span>Liste în React. Proprietatea key</span></a></h1><p>Dacă citiți acest lucru, înseamnă că ați parcurs deja un drum colosal. Deja știți multe despre componente și prop-uri în React, dar ceva a rămas în afara discuției. În lecțiile anterioare, am arătat cum sunt stocate array-urile în starea internă sau sunt transmise ca prop-uri, dar nu am explicat cum să afișăm elementele unui array în JSX. Pentru a înțelege acest lucru, trebuie să studiem listele.</p><p>O listă este un set de elemente omogene și adiacente. Adică, sunt orice date de același tip care se repetă de mai mult de o dată: meniul site-ului, lista utilizatorilor, galeria de imagini.</p><p>Să presupunem că lucrăm la un component pentru chat și avem următoarele date:</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token punctuation">[</span>
	<span class="token punctuation">{</span>
		<span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
		<span class="token literal-property property">user</span><span class="token operator">:</span> <span class="token string">&quot;Olga&quot;</span><span class="token punctuation">,</span>
		<span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">&quot;Salut! Poți să mă ajuți cu listele în React?&quot;</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token punctuation">{</span>
		<span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
		<span class="token literal-property property">user</span><span class="token operator">:</span> <span class="token string">&quot;Nicolai&quot;</span><span class="token punctuation">,</span>
		<span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">&quot;Bună! Desigur, este mai simplu decât pare! Ce întrebare ai?&quot;</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token punctuation">{</span>
		<span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
		<span class="token literal-property property">user</span><span class="token operator">:</span> <span class="token string">&quot;Olga&quot;</span><span class="token punctuation">,</span>
		<span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">&quot;Mulțumesc! Cum ajung ele în JSX?&quot;</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Fiecare element al array-ului dorim să îl afișăm ca un mesaj în chat sub forma următoarei marcaje:</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;Message&quot;</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>span className<span class="token operator">=</span><span class="token string">&quot;Message-user&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>message<span class="token punctuation">.</span>user<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>span className<span class="token operator">=</span><span class="token string">&quot;Message-text&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>message<span class="token punctuation">.</span>text<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>În JSX, putem folosi metoda de array <code>map</code>. Să o aplicăm și să creăm un component care va afișa lista de mesaje așa cum dorim:</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">ChatRoom</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
    state <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">messages</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
          <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
          <span class="token literal-property property">user</span><span class="token operator">:</span> <span class="token string">&#39;Olga&#39;</span><span class="token punctuation">,</span>
          <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">&#39;Salut! Poți să mă ajuți cu listele în React?&#39;</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
          <span class="token literal-property property">user</span><span class="token operator">:</span> <span class="token string">&#39;Nicolai&#39;</span><span class="token punctuation">,</span>
          <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">&#39;Bună! Desigur, este mai simplu decât pare! Ce întrebare ai?&#39;</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
          <span class="token literal-property property">user</span><span class="token operator">:</span> <span class="token string">&#39;Olga&#39;</span><span class="token punctuation">,</span>
          <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">&#39;Mulțumesc! Cum ajung ele în JSX?&#39;</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;ChatRoom&quot;</span><span class="token operator">&gt;</span>
                <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>messages<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">message</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">(</span>
                    <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;Message&quot;</span><span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span>span className<span class="token operator">=</span><span class="token string">&quot;Message-user&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>message<span class="token punctuation">.</span>user<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span>span className<span class="token operator">=</span><span class="token string">&quot;Message-text&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>message<span class="token punctuation">.</span>text<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
                <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Atât! Codul va funcționa, dar în consolă va apărea un avertisment despre necesitatea utilizării prop-ului <code>key</code> pentru fiecare element al listei. Să analizăm ce este acest prop și cum să îl folosim.</p><h2 id="proprietatea-key" tabindex="-1"><a class="header-anchor" href="#proprietatea-key"><span>Proprietatea <code>key</code></span></a></h2><p>După cum știți, când se schimbă <code>props</code>, <code>state</code>, componentele și descendenții lor, React compară recursiv arborele de componente „Înainte” de modificări cu arborele de componente „După” acestea. Acolo unde găsește diferențe, React reafișează toți descendenții componentei actualizate. Logic, când se schimbă conținutul unei liste, React ar trebui să reafișeze întreaga listă, chiar dacă schimbările au afectat doar un element.</p><p>În exemplul cu chatul, utilizatorul ar putea să editeze mesajul după ce l-a trimis. Această acțiune va afecta doar un mesaj din chat, dar poate duce la o deteriorare a performanței sau chiar la blocarea completă a filei browserului, deoarece React va declanșa reafișarea întregului chat. Din fericire, există o modalitate</p><p>de a preveni acest lucru: toate elementele din React acceptă prop-ul <code>key</code>. Trebuie să specificați această proprietate la primul element al markup-ului din interiorul buclei. Dacă acestui element i se atribuie această proprietate, atunci când vecinii săi din listă se schimbă, elementul însuși nu va fi reafișat:</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token operator">...</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;ChatRoom&quot;</span><span class="token operator">&gt;</span>
                <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>messages<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">message</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">(</span>
                    <span class="token punctuation">{</span><span class="token comment">/* Am adăugat prop-ul key */</span><span class="token punctuation">}</span>
                    <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;Message&quot;</span> key<span class="token operator">=</span><span class="token punctuation">{</span>message<span class="token punctuation">.</span>id<span class="token punctuation">}</span><span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span>span className<span class="token operator">=</span><span class="token string">&quot;Message-user&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>message<span class="token punctuation">.</span>user<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span>span className<span class="token operator">=</span><span class="token string">&quot;Message-text&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>message<span class="token punctuation">.</span>text<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
                <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token operator">...</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Acum, dacă utilizatorii vor scrie un mesaj nou sau vor edita unul vechi, restul mesajelor din listă nu se vor actualiza. Aplicația nu va încetini, iar utilizatorii nu se vor enerva.</p><p>Proprietatea <code>key</code> trebuie utilizată întotdeauna pentru afișarea listelor. Chiar și fragmentele acceptă această proprietate (și este singura proprietate a fragmentelor):</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token operator">...</span>
<span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>messages<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">message</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>React<span class="token punctuation">.</span>Fragment key<span class="token operator">=</span><span class="token punctuation">{</span>message<span class="token punctuation">.</span>id<span class="token punctuation">}</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>img className<span class="token operator">=</span><span class="token string">&quot;Avatar&quot;</span> src<span class="token operator">=</span><span class="token punctuation">{</span>message<span class="token punctuation">.</span>user<span class="token punctuation">.</span>avatar<span class="token punctuation">}</span> alt<span class="token operator">=</span><span class="token string">&quot;avatar&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;Message&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>span className<span class="token operator">=</span><span class="token string">&quot;Message-user&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>message<span class="token punctuation">.</span>user<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>span className<span class="token operator">=</span><span class="token string">&quot;Message-text&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>message<span class="token punctuation">.</span>text<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>React<span class="token punctuation">.</span>Fragment<span class="token operator">&gt;</span>
<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
<span class="token operator">...</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>În acest exemplu, am adăugat în markup avatarul expeditorului, dar l-am învelit totul cu ajutorul <code>React.Fragment</code>.</p><p>Proprietatea <code>key</code> trebuie să fie unică pentru fiecare element din listă. Repetarea cheilor elementelor listei poate duce la o funcționare imprevizibilă și la erori de afișare. Cheile se pot repeta doar dacă sunt folosite de două liste diferite.</p><p>Dacă elementele listei nu au identificatori unici, de exemplu <code>id</code>, puteți folosi al doilea argument al metodei <code>map</code> - indexul elementului array. Indexul este unic pentru fiecare dintre elementele situate într-un singur array. Această soluție este potrivită doar în cazul în care sunteți siguri că ordinea elementelor nu se va schimba.</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token operator">...</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;ChatRoom&quot;</span><span class="token operator">&gt;</span>
                <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>messages<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">message<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">(</span>
                    <span class="token punctuation">{</span><span class="token comment">/* Se folosește indexul elementului ca key */</span><span class="token punctuation">}</span>
                    <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;Message&quot;</span> key<span class="token operator">=</span><span class="token punctuation">{</span>index<span class="token punctuation">}</span><span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span>span className<span class="token operator">=</span><span class="token string">&quot;Message-user&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>message<span class="token punctuation">.</span>user<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span>span className<span class="token operator">=</span><span class="token string">&quot;Message-text&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>message<span class="token punctuation">.</span>text<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
                <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token operator">...</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>În acest exemplu, am folosit al doilea argument al metodei <code>map</code> pentru proprietatea <code>key</code>. Acest truc va fi întâlnit des în aplicațiile reale. În acest curs, veți avea ocazia să lucrați de mai multe ori cu array-uri, așa că vă așteaptă câteva sarcini pentru consolidarea abilităților.</p>`,23),o=[p];function c(i,l){return s(),n("div",null,o)}const u=a(t,[["render",c],["__file","lists.html.vue"]]),d=JSON.parse('{"path":"/base/lists.html","title":"Liste în React. Proprietatea key","lang":"ro-RO","frontmatter":{"title":"Liste în React. Proprietatea key","lang":"ro-RO","description":"Liste în React. Proprietatea key Dacă citiți acest lucru, înseamnă că ați parcurs deja un drum colosal. Deja știți multe despre componente și prop-uri în React, dar ceva a rămas...","head":[["meta",{"property":"og:url","content":"https://react.md/base/lists.html"}],["meta",{"property":"og:site_name","content":"React.js - Curs de Dezvoltare"}],["meta",{"property":"og:title","content":"Liste în React. Proprietatea key"}],["meta",{"property":"og:description","content":"Liste în React. Proprietatea key Dacă citiți acest lucru, înseamnă că ați parcurs deja un drum colosal. Deja știți multe despre componente și prop-uri în React, dar ceva a rămas..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"ro-RO"}],["meta",{"property":"og:updated_time","content":"2024-03-09T11:18:09.000Z"}],["meta",{"property":"article:modified_time","content":"2024-03-09T11:18:09.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Liste în React. Proprietatea key\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-03-09T11:18:09.000Z\\",\\"author\\":[]}"]]},"headers":[{"level":2,"title":"Proprietatea key","slug":"proprietatea-key","link":"#proprietatea-key","children":[]}],"git":{"updatedTime":1709983089000,"contributors":[{"name":"nikba","email":"41567806+Nikba-Creative-Studio@users.noreply.github.com","commits":1}]},"filePathRelative":"base/lists.md","autoDesc":true}');export{u as comp,d as data};
